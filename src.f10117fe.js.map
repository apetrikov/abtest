{"version":3,"sources":["src/const.ts","src/analytics/analytics-api.ts","src/analytics/analytics.ts","src/ab-test/const.ts","src/ab-test/local-storage.ts","src/ab-test/index.ts","src/api/logger.ts","src/index.ts","node_modules/parcel-bundler/src/builtins/bundle-url.js","node_modules/parcel-bundler/src/builtins/css-loader.js"],"names":["bundleURL","getBundleURLCached","getBundleURL","Error","err","matches","stack","match","getBaseURL","url","replace","exports","bundle","require","updateLink","link","newLink","cloneNode","onload","remove","href","split","Date","now","parentNode","insertBefore","nextSibling","cssTimeout","reloadCSS","setTimeout","links","document","querySelectorAll","i","length","module"],"mappings":"AQAA,ACAA,IDAIA,ACAAY,MAAM,GDAG,ACAAC,GDAG,IAAI,ACAA,CAAC,cAAc,CAAC;ADCpC,ACCA,SDDSZ,ACCAa,UAAU,CAACC,IAAI,EAAE,CDDC,GAAG;APD9B,EOEE,ACCA,IDDI,ACCAC,CDDChB,MCCM,GDDG,ACCAe,EDDE,ECCE,CAACE,SAAS,EAAE;EAC9BD,EDDEhB,KCCK,CAACkB,GDDG,GAAGhB,ACCA,GAAG,SDDS,EAAE,CCCC;EDA7B,ECCEa,IAAI,CAACI,MAAM,EAAE;AFLjB,ECME,ACAA,CAAC,IFNH,CAAA,CCMSnB,SAAS,IDNlB,CAAA;ACOA,ALPA,ACAA,AFAA,AIMA,ANNa,AOCb,EEMEgB,ENPU,ACAZ,AFAA,AKCA,EJIC,CHLY,CAAA,CSOJ,CAACI,CLPV,AGCA,GEMc,ALPd,AGCA,GEMiBL,EPPjB,CFAyB,CSOJ,ALPrB,AGCA,CEMsBK,ALPtB,AFAA,AKCA,CPD4B,GSOF,CAACC,EPP3B,CAAA,CEAA,AGCA,CEMgC,ALPhC,AGCA,CEMiC,ATPK,CAAA,CAAC,CSOH,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,CPP9C,CAAA,COOiDC,IAAI,CAACC,GAAG,EAAE;ADE3D,ALTA,ACUA,AFRO,AIKA,ANNM,AOCb,CJFA,CMQER,EPNW,AIKA,ACLb,EEMM,CAACS,AHDS,ANNH,CAAA,CQQJtB,AJCA,CEHU,CHPP,EAAE,CHCK,CGDL,AIEd,EEMiB,ALEA,AFRS,AFDJ,CSOJuB,ALEA,AGRlB,CDKa,CJLgB,AFDJ,CQQJ,ARRI,CISE,AEHX,ANNU,CMMN,CEEI,AJCG,CGR3B,CAAA,GLAa,COMiB,AHDU,CGCTT,CHDmB,MGCZ,EAAED,EPNd,CAAI,COMc,CAACW,IPND,AKA5C,CAAA,CLA8C,GAAW,EOMD,APNG,COMF,UPNqB,EAAU;AOOxF,ATPa,AOCb,ECOE,ALTA,ACUE,AFRF,AIKA,EHPA,AIEF,CJFE,CDEM,CFDK,CAAA,CMMJ,CAAC,GAAG,ACLb,CLAgB,EKAhB,CLAmB,GCFjB,CAAA,EIEF,CJFE,AHC2B,AOC7B,ELAQ,CFDwB,KAAK,CAAA,CECrB,AFDsB,CGDT,AIE7B,CDK6B,ACL7B,IDKiC,CAAC,SAAS,CAAC,OAAO,CAAC,EAAG;AGGvD,AHFA,ANLa,AOAb,CDKC,CEEC,ALTA,ACUE,EKDAC,ANTF,ADCc,AKChB,CJFE,CKSI,AJCG,CJRI,CAAA,GEDY,CAAA,AKCzB,CHQgB,AFTS,COQX,CPRW,AKCzB,EEOiB,ALCG,AJRE,CIQD,EAAE,AJRE,CSOJ,CFPrB,CAAA,EHQ4B,CDV1B,CAAA,EHEgC,CGFhC,ADCuB,CAAA,EESW,IAAM,AGR1C,CAAA,MHQiD,AFTX,EAAC,CCDE,CCUY,CAAC,GAAG,KAAK,QAAS,EAAE,OAAO,KAAK;AKArF,AHLa,ACDb,EJHE,ACUE,EIDA,ALTF,CAAA,CCUO,AFV+B,CII3B,CJJ6B,AII7B,CGKJC,CDAC,ANTkC,CII5B,EFMA,CIDFzB,ANTkC,AIIhC,CJJiC,EEU7B,AENJ,CGKE,ALCG,AFV+B,CMSjC,CNTmC,COSjC,CLCI,CDVvB,CAAA,GAAA,ACU4B,QAAQ,IAAM,EDVT,KCUgB,IAAI,CAAC,OAAO,KAAK,QAAS,EAAE,OAAO,KAAK;AHS3F,AMdA,ECKE,ACAA,ANTA,ACUE,CIDD,CAAC,ALTF,CAAA,CMSIwB,ALCE,AFXgD,GAAG,EMUhDvB,ANV6C,EEWzC,CIDD,ANV6C,EMU3C,ACAA,CLCG,CKDD,ALCE,GDVlB,CAAA,ACUsB,GDVtB,ECU2B,QDVA,ACUQ,CDVR,CAAE,ACUQ,OAAO,KAAK;ADTnD,AFkBO,AMdP,CJJC,CCUG,CDfQ,CKcR,ACAA,ARSS,CEvBC,CDG+C,EMWrDC,ALdI,CCeD,CFZsD,EAAE,CEYpD,EIDA,ALdH,CAAA,CFuBc,COTR,ALdJ,ADG2D,CMWtD,CPSU,COTR,ELdT,CKcYD,GAAG,CAACE,CPSf,CEvBD,CAAA,EKcqB,ALdnB,EKcqBC,CLdrB,CAAA,CAAA,CAAA,CKc0B,ALd1B,CKc2B,CPSf,CAAI,OAAwB,EAAU,oDOTwC,CAAC;ALPzG,ACSA,AGNA,EEKE,ARSE,EOTA,ALRQ,EAEX,AFeS,ACrBiE,EMYnEF,IPSQ,ACrBiE,EAAN,CMY5D,APSY,EOTV,EPSc,CAAC,SAAS,CAAC,OAAO,CAAC;AEjBlD,ACWO,AGPP,CJJA,CMUEsB,ARQE,EGPS,AFfoE,CAAC,CMa5E,ANb6E,EEelE,CHON,CAAC,CElBA,ACWQ,CKDR,CDDCnB,ALTC,AFkBC,EQRAqB,ANVD,KCWD,GIFU,CAACxB,AJEP,CKDQ,ALCJ,CKDK,ELCM,EAAmB,CIFpB,CAAC,CAAC,CAAC,CAAC,GCCG,SRQI,MAAM,EAAG;AACnD,AMZA,CNYC,CElBC,ACWA,AFhBiF,EMc/E,ACCA,ANVF,CAAA,CCWM,EKDAyB,CLCG,IKDE,ENVX,CMUcC,ANVd,GAAA,GCWe,EKDO,CAACC,ILCR,CAAA,CDXQ,CCWN,CAAC,QKDqB,ALCb,CKDc,aLCV,GAAG,CAAE,OKD6B,CAAC;ANTnE,AFca,AMPb,CJPC,CKSC,AJEE,AFhBF,CCGU,CMYR,CNZU,CCaJ,AFhBF,CDmBK,CEhBD,AFgBC,CQJJ,IAAIC,ALCI,CKDH,APfE,CCGJ,CAAA,ACaQ,CKDH,APfE,COeD,ANZJ,EMYMA,CAAC,ARIK,EEhBd,CMYYH,ARIE,ECnBlB,EEgBwB,CKDH,ALCI,CKDHI,ANZlB,CAAA,EAAE,CDHE,EOeoB,ANZtB,ACa0B,CDb1B,ACa2B,AHGf,CQJYD,ANZxB,CMYyB,ANZzB,CAAA,ACa8B,CKDH,ALCI,EKDF;ARS3C,AMXA,ECGE,AJCE,EFjBY,AKaV,EEGA,ALCE,CAAC,AGJA,ECGA,CCACrB,AFHU,CLbK,CMgBb,ANhBa,CAAA,CEiBT,CFjBS,COgBT,ALCE,AGJQ,CEGTJ,AFHU,MHIF,EGJU,CAAC,CEGT,ALCE,CKDDsB,EPhBH,AKae,CLbf,EOgBQ,CAACG,CAAC,CAAC,CAACb,IAAI,APhBN,COgBO,CPhBN,IOgBWR,MAAM,CAACV,YAAY,EAAE,EAAE;ADCtE,APQO,AMXP,EHII,EHOS,AMXP,EHIE,AFlB6B,EOiB7BY,APjB+B,EEkBlB,AFlBoB,AKc7B,GAAG,CNWQ,ACzBsB,CAAC,EDyBpB,CQRR,APjB+B,COiB9BgB,CPjBgC,EKc7C,EEGkB,CAACG,CAAC,ARQb,CQRc,CAAC,AFHhB,CAAI,ONWO,AMXQ,CNWJ,OAAqB,EAAU;AON1D,EJCI,AHMA,AMZ2B,IEIzB,ALEE,AHME,AC1B2C,GMmB5CzB,ANnB+C,AKcpB,CAAA,CLdiB,AKcjB,CNYpB,CMZoB,CLdoB,CD0B7B,IOPR,APOY,COPXC,APOY,CMZI,CAAA,CCKb,EAAE,ADLc,EAAC,ENYC,CAAC,OAAO,CAAC;EONhD,APOE,EQRA,ALEI,AGPiC,ELdiB,CKcd,CHOhC,CIDH,APOE,AMb8B,CCM/B,APOE,AC3BkD,CEqB/C,CIDH,ANpBoD,AKcpB,CNa7B,EOPAA,AJCI,CAAC,EIDF,CNpBqD,CMoBnDC,CJCK,CAAC,KIDC,CAAC,CJCK,CAAC,cHMK,MAAM,EAAG,wDOP4D,EAAE,IAAI,CAAC,GAAG,GAAG;AACzH,APOA,CAAC,EGNI,CKDDiB,ALCE,AGRwC,ELd2B,EKcvB,EAAE,CHQ9C,CFtByE,CEsBzE,CKDQ,APrB2D,CEsB7D,EKDK,AFP0C,IEOtC;ADErBhB,APEa,EQHX,CAAC,CLCK,AFvBuE,AKclB,CEQxD,APtB2E,CAAC,CMuB1E,ACDA,ARGM,COFLT,ACDA,ARGK,GGFE,AGTqD,CHSpD,CGT6C,EHS1C,CAAC,EHEG,EOFH,CPEG,EOFAD,QPEA,GGFe,CAAC,CAAA,CAAC,IIAC;AACzCU,ACDA,EPvBiF,AKcb,CAAC,CHU7D,AGV8D,CHU9D,CAAA,CIAD,CAACH,AJAA,OAAA,CAAA,EIAU,GAAGA,CJAP,EAAC,GAAG,CAAC,GIAY;ACC/B2B,AFXsE,ELbpE,EEwBM,EKAF,APxBE,COwBDxB,ILAQ,GKAD,CLAK,CFxBD,COwBDiB,EPxBI,OOwBK,EPxBlB,UAAU,GAAQ;AKe1B,CAAA,CAAA,ELdI,AKcJ,MLdU,CAAC,IKcX,CAAA,aAAa,CLdiB,CAAC,AKcjB,MLduB,CKcvB,CLdyB,AKczB,MAAM,ELd2B,AKczB,CLd0B,EKcvB,EAAE,OAAA,CAAA,YAAY,CAAC;AACxC,CAAA,CHWI,AGXJ,ELdI,AKcJ,EHWQ,IFzBE,CAAC,EKcX,CHWgB,AGXhB,CHWiB,IAAI,CAAC,EAAE,EGXd,EAAC,GHWoB,CFzBD,CAAC,EEyBI,KFzBG,EAAE,QAAQ,CAAC;EE0B7C,AGZQ,ELbR,CKaW,EA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","file":"src.f10117fe.js","sourceRoot":"..","sourcesContent":["export const CTA_SELECTOR = 'data-cta' // for the button\nexport const userId = '1' // for the test reason id is here as a const\nexport const isRegisteredUser = false // We need only unregistered users\n\nexport const publicURL = '/abtest'","/**\n * Tracks a pageview to our \"imaginary api\" - in this demo just the browser console. ;)\n * Send as params whatever you might seem valuable to send.\n * The URL is probably a good start though.\n */\n\n\n// here we will send other data from navigator\ntype Payload = {\n  userId: string,\n  ts: number,\n  url: string,\n}\n\ntype PageViewPayload  = Payload & {\n    type: 'load' | 'unload'\n}\n\ntype EventPayload = Payload & {\n    type: 'click'\n}\n\n// send page events like open, close, scroll\nexport const trackPageview = (payload: PageViewPayload): void => {\n    const parsed: String = JSON.stringify(payload)\n    console.log(`--> Tracking Pageview: ${parsed}`);\n};\n\n// sent user events like press, click\nexport const trackEvent = (payload: EventPayload): void => {\n    const parsed: String = JSON.stringify(payload)\n    console.log(`--> Tracking Event: ${parsed}`);\n};\n","import {trackPageview, trackEvent} from \"./analytics-api\";\n\nexport const initAnalytics = (userId: string, url: string, ctaSelector: string): void => {\n  const loadPage = () => trackPageview({ts: Date.now(), url, type: 'load', userId})\n  const clickCta = () => trackEvent({ts: Date.now(), url, type: 'click', userId})\n  const unloadPage = () => {\n    window.removeEventListener('load', loadPage)\n    window.removeEventListener('click', clickCta)\n    window.removeEventListener('beforeunload', unloadPage)\n\n    trackPageview({ts: Date.now(), url, type: 'unload', userId})\n  }\n\n  window.addEventListener('load', loadPage)\n\n  const ctaButton = document.querySelector(`[${ctaSelector}]`)\n  if (ctaButton) ctaButton.addEventListener('click', clickCta)\n\n  window.addEventListener('beforeunload', unloadPage)\n}","export enum AB {\n  SELECTOR_NAME = 'data-test',  // main selector of the test. Only one per document\n  SELECTOR_EXPIRATION = 'data-expiration',  // date of test expiration\n  SELECTOR_VARIANT = 'data-variant',  // test variant letter\n  SELECTOR_IMAGE = 'data-src'  // for image optimization\n}\n\nexport enum LS {\n  KEY_NAME = 'APP_ABTEST'\n}","import {LS} from \"./const\";\n\nexport type LStest = {\n    ts: string,\n    url: string,\n    name: string\n    variant: string,\n    expiration: string,\n}\n\nfunction isLStest(item: any): item is LStest {\n    // explicit properties\n    if ((typeof item.ts !== 'string') && (typeof item.url !== 'string')) return false\n    if ((typeof item.name !== 'string') && (typeof item.variant !== 'string')) return false\n    if (typeof item.name !== 'string') return false\n    return true\n}\n\nexport const read = (url: string): LStest | null => {\n  const key = `${LS.KEY_NAME}_${url}`\n    const rawItem = localStorage.getItem(key)\n    if (!rawItem) return null\n    let item: unknown\n\n    try {\n        item = JSON.parse(rawItem)\n    } catch {\n        console.log('LS parsing error') // Not real log\n        remove(url)\n        return null\n    }\n\n    if (isLStest(item)) return item\n    return null\n}\n\nexport const write = (params: LStest): void => {\n    localStorage.setItem(`${LS.KEY_NAME}_${params.url}`, JSON.stringify(params))\n}\n\nexport const remove = (url: string): void => {\n  const key = `${LS.KEY_NAME}_${url}`\n  localStorage.removeItem(key)\n}","import {AB} from \"./const\";\nimport {LStest, read, remove, write} from \"./local-storage\";\nimport {publicURL} from \"../const\";\n\n// TODO later: optimize media loading with data-src\n\ntype InitParams = {\n    userId: string,\n    isRegisteredUser: boolean,\n    url: string\n}\n\nconst validateExpirationDate = (expirationDate: string): boolean => {\n    const date = new Date(expirationDate)\n\n    if (date.toString() === 'Invalid date') return false\n    if (date.getTime() <= Date.now()) return false\n\n    return true\n}\n\nconst hideOtherVariants = (variants: Element[]) => (name?: string): void => {\n    let variantIndex = 0;\n    if (name) {\n        variantIndex = variants.findIndex(node => node.getAttribute(AB.SELECTOR_VARIANT) === name);\n    }\n    if (variantIndex < 0) variantIndex = 0; // show default\n    [...variants.slice(0, variantIndex), ...variants.slice(variantIndex + 1)].forEach(node => node.remove())\n}\n\nconst hideLoader = () => {\n  const loader = document.querySelector('.loader')\n  loader?.remove()\n}\n\nconst loadimages = async () => {\n  const unloadedImages = document.querySelectorAll(`[${AB.SELECTOR_IMAGE}]`)\n  if (unloadedImages.length === 0) return\n\n  const array = <any>[]\n\n\n  unloadedImages.forEach(el => {\n    const img = el as HTMLImageElement\n    const src = img.getAttribute(AB.SELECTOR_IMAGE)\n\n    if (process.env.NODE_ENV === 'production') {\n      src && img.setAttribute('src', publicURL + src)\n    } else {\n      src && img.setAttribute('src', src)\n    }\n\n\n\n    array.push(img.decode())\n  })\n\n  await Promise.all(array)\n}\n\n\nexport const initABTest = (params: InitParams, log?: (payload: string) => void): void => {\n    const testEl = document.querySelector(`[${AB.SELECTOR_NAME}]`)\n    if (!testEl) return // no test, show as is, OK\n\n    const testVariants = testEl.querySelectorAll(`[${AB.SELECTOR_VARIANT}]`)\n    if (testVariants.length < 2) {\n        log?.('AB test, less then 2 variants')\n        remove(params.url)\n        return\n    } // log ERROR, show as is\n\n  const showVariant = async (name?: string) => {\n      hideOtherVariants(Array.from(testVariants))(name)\n      await loadimages()\n      hideLoader()\n    }\n\n    // Further we have two+ variants\n    const testName = testEl.getAttribute(AB.SELECTOR_NAME)\n    if (!testName) {\n        log?.('AB test, no test name')\n        remove(params.url)\n        showVariant()\n        return\n    }\n\n\n    const expirationDate = testEl.getAttribute(AB.SELECTOR_EXPIRATION)\n    if (!expirationDate) {\n        log?.('AB test, no expiration date')\n        remove(params.url)\n        showVariant()\n        return\n    }// log error, select first variant (control)\n    if (!validateExpirationDate(expirationDate)) {\n        log?.('AB test, wrong expiration date')\n        remove(params.url)\n        showVariant()\n        return\n    }\n\n    if (params.isRegisteredUser) {\n        showVariant()\n        return\n    }// select first variant (control)\n\n    // check LS\n    const variantFromLS = (test: LStest): string | void => {\n        const compareTestAndLS = (test: LStest, ls: LStest): boolean => {\n            if (test.name !== ls.name) return false\n            if (test.expiration !== ls.expiration) return false\n            if (test.url !== ls.url) return false\n            return true\n        }\n\n        const lsVariant = read(params.url)\n        if (!lsVariant) return\n        if (!compareTestAndLS(test, lsVariant)) {\n            log?.('AB test, wrong LS data')\n            return\n        }\n\n        return lsVariant.variant\n    }\n\n    const test: LStest = {\n        ts: `${Date.now()}`,\n        variant: 'A',\n        name: testName,\n        url: params.url,\n        expiration: expirationDate\n    }\n    const LStestVariant = variantFromLS(test)\n    if (LStestVariant) {\n        showVariant(LStestVariant)\n        return\n    }\n\n    // randomly assign a variant, show it\n    const numberOfVariants: number = testVariants.length\n    const randomVariant: number = Math.floor(Math.random() * numberOfVariants);\n    const randomName = Array.from(testVariants)[randomVariant].getAttribute(AB.SELECTOR_VARIANT)\n\n    if (!randomName) {\n        log?.('AB test, can not define random variant name')\n        showVariant()\n        return\n    }\n\n    write({\n        ...test,\n        variant: randomName,\n    })\n    showVariant(randomName)\n}\n","type LoggerEvent = {\n  url: string,\n  type: 'error',\n  payload: string\n}\n\n// logs events params: type, url, payload\nexport const log = (payload: LoggerEvent): void => {\n  console.log(`--> Logger: ${JSON.stringify(payload)}`);\n};","import \"./styles.css\";\nimport {CTA_SELECTOR, userId, isRegisteredUser} from \"./const\";\nimport {initAnalytics} from \"./analytics/analytics\";\nimport {initABTest} from \"./ab-test\"\nimport {log} from \"./api/logger\"\n\n// Your code here\n\n// Parse HTML for test info\n// Parse cookies\n// Compare cookies and HTML\n// Apply final variant changes to HTML\n\n\n// TODO\n\n// Add analytics tracker\nconst url: string = window.location.href\nconst logger = (payload: string) => log({url, type: 'error', payload})\n\ninitAnalytics(userId, url, CTA_SELECTOR)\ninitABTest({url, userId, isRegisteredUser}, logger)\n\n\n\n\n// Work with HTML service\n// Work with cookie service\n// Log errors servise","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\\/\\/.+)?\\/[^/]+(?:\\?.*)?$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var bundle = require('./bundle-url');\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    link.remove();\n  };\n  newLink.href = link.href.split('?')[0] + '?' + Date.now();\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      if (bundle.getBaseURL(links[i].href) === bundle.getBundleURL()) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nmodule.exports = reloadCSS;\n"]}