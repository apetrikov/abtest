{"version":3,"sources":["src/const.ts","src/analytics/analytics-api.ts","src/analytics/analytics.ts","src/ab-test/const.ts","src/ab-test/local-storage.ts","src/ab-test/index.ts","src/index.ts","node_modules/parcel-bundler/src/builtins/bundle-url.js","node_modules/parcel-bundler/src/builtins/css-loader.js","node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["bundleURL","getBundleURLCached","getBundleURL","Error","err","matches","stack","match","getBaseURL","url","replace","exports","bundle","require","updateLink","link","newLink","cloneNode","onload","remove","href","split","Date","now","parentNode","insertBefore","nextSibling","cssTimeout","reloadCSS","setTimeout","links","document","querySelectorAll","i","length","module","OVERLAY_ID","OldModule","Module","moduleName","call","hot","data","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","push","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","event","JSON","parse","type","handled","assets","forEach","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","id","every","generated","js","console","clear","hmrApply","v","hmrAcceptRun","reload","close","onclose","log","removeErrorOverlay","error","message","overlay","createErrorOverlay","body","appendChild","getElementById","createElement","stackTrace","innerText","innerHTML","getParents","modules","parents","k","d","dep","Array","isArray","concat","Function","deps","cached","cache","some","cb"],"mappings":"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","file":"src.f10117fe.js","sourceRoot":"..","sourcesContent":["export const CTA_SELECTOR = 'data-cta' // for the button\nexport const userId = '1' // for the test reason id is here as a const\nexport const isRegisteredUser = false // We need only unregistered users\n\nexport const publicURL = '/abtest'","/**\n * Tracks a pageview to our \"imaginary api\" - in this demo just the browser console. ;)\n * Send as params whatever you might seem valuable to send.\n * The URL is probably a good start though.\n */\n\n\n// here we will send other data from navigator\ntype Payload = {\n  userId: string,\n  ts: number,\n  url: string,\n}\n\ntype PageViewPayload  = Payload & {\n    type: 'load' | 'unload'\n}\n\ntype EventPayload = Payload & {\n    type: 'click'\n}\n\ntype CodePayload = Payload & {\n  data: string\n}\n\n// send page events like open, close, scroll\nexport const trackPageview = (payload: PageViewPayload): void => {\n    const parsed: String = JSON.stringify(payload)\n    console.log(`--> Tracking Pageview: ${parsed}`);\n};\n\n// sent user events like press, click\nexport const trackEvent = (payload: EventPayload): void => {\n    const parsed: String = JSON.stringify(payload)\n    console.log(`--> Tracking Event: ${parsed}`);\n};\n\nexport const trackCodeEvent = (payload: CodePayload): void => {\n  const parsed: String = JSON.stringify(payload)\n  console.log(`--> Tracking Pageview: ${parsed}`);\n};","import {trackPageview, trackEvent, trackCodeEvent} from \"./analytics-api\";\n\nexport const initAnalytics = (userId: string, url: string, ctaSelector: string): (data: string) => void => {\n  const loadPage = () => trackPageview({ts: Date.now(), url, type: 'load', userId})\n  const clickCta = () => trackEvent({ts: Date.now(), url, type: 'click', userId})\n  const unloadPage = () => {\n    window.removeEventListener('load', loadPage)\n    window.removeEventListener('click', clickCta)\n    window.removeEventListener('beforeunload', unloadPage)\n\n    trackPageview({ts: Date.now(), url, type: 'unload', userId})\n  }\n\n  window.addEventListener('load', loadPage)\n\n  const ctaButton = document.querySelector(`[${ctaSelector}]`)\n  if (ctaButton) ctaButton.addEventListener('click', clickCta)\n\n  window.addEventListener('beforeunload', unloadPage)\n\n  return (data: string) => trackCodeEvent({ts: Date.now(), url, userId, data})\n}","export enum AB {\n  SELECTOR_NAME = 'data-test',  // main selector of the test. Only one per document\n  SELECTOR_EXPIRATION = 'data-expiration',  // date of test expiration\n  SELECTOR_VARIANT = 'data-variant',  // test variant letter\n  SELECTOR_IMAGE = 'data-src'  // for image optimization\n}\n\nexport enum LS {\n  KEY_NAME = 'APP_ABTEST'\n}","import {LS} from \"./const\";\n\nexport type LStest = {\n    ts: string,\n    url: string,\n    name: string\n    variant: string,\n    expiration: string,\n}\n\nfunction isLStest(item: any): item is LStest {\n    // explicit properties\n    if ((typeof item.ts !== 'string') && (typeof item.url !== 'string')) return false\n    if ((typeof item.name !== 'string') && (typeof item.variant !== 'string')) return false\n    if (typeof item.name !== 'string') return false\n    return true\n}\n\nexport const read = (url: string): LStest | null => {\n  const key = `${LS.KEY_NAME}_${url}`\n    const rawItem = localStorage.getItem(key)\n    if (!rawItem) return null\n    let item: unknown\n\n    try {\n        item = JSON.parse(rawItem)\n    } catch {\n        console.log('LS parsing error') // Not real log\n        remove(url)\n        return null\n    }\n\n    if (isLStest(item)) return item\n    return null\n}\n\nexport const write = (params: LStest): void => {\n    localStorage.setItem(`${LS.KEY_NAME}_${params.url}`, JSON.stringify(params))\n}\n\nexport const remove = (url: string): void => {\n  const key = `${LS.KEY_NAME}_${url}`\n  localStorage.removeItem(key)\n}","import {AB} from \"./const\";\nimport {LStest, read, remove, write} from \"./local-storage\";\nimport {publicURL} from \"../const\";\n\ntype InitParams = {\n    userId: string,\n    isRegisteredUser: boolean,\n    url: string\n}\n\nconst validateExpirationDate = (expirationDate: string): boolean => {\n    const date = new Date(expirationDate)\n\n    if (date.toString() === 'Invalid date') return false\n    if (date.getTime() <= Date.now()) return false\n\n    return true\n}\n\nconst hideLoader = () => {\n    const loader = document.querySelector('.loader')\n    loader?.remove()\n}\n\nconst loadimages = async () => {\n    const unloadedImages = document.querySelectorAll(`[${AB.SELECTOR_IMAGE}]`)\n    if (unloadedImages.length === 0) return\n\n    const array = <any>[]\n\n\n    unloadedImages.forEach(el => {\n        const img = el as HTMLImageElement\n        const src = img.getAttribute(AB.SELECTOR_IMAGE)\n\n        if (process.env.NODE_ENV === 'production') {\n            src && img.setAttribute('src', publicURL + src)\n        } else {\n            src && img.setAttribute('src', src)\n        }\n\n\n        array.push(img.decode())\n    })\n\n    await Promise.all(array)\n}\n\n\nexport const initABTest = async (params: InitParams, log?: (payload: string) => void): Promise<void> => {\n    const hideOtherVariants = (variants: Element[]) => (name?: string): void => {\n        let variantIndex = 0;\n        if (name) {\n            variantIndex = variants.findIndex(node => node.getAttribute(AB.SELECTOR_VARIANT) === name);\n        }\n        if (variantIndex < 0) {\n            log?.('AB test, can not find saved variant')\n            variantIndex = 0; // show default\n        }\n        [...variants.slice(0, variantIndex), ...variants.slice(variantIndex + 1)].forEach(node => node.remove())\n    }\n\n    const testEl = document.querySelector(`[${AB.SELECTOR_NAME}]`)\n    if (!testEl) {\n        await loadimages()\n        hideLoader()\n        return // no test, show as is, OK\n    }\n    const testName = testEl.getAttribute(AB.SELECTOR_NAME)\n\n    const showVariant = async (name?: string) => {\n        log?.(`AB test, name: ${testName}, variant: ${name}`)\n        hideOtherVariants(Array.from(testVariants))(name)\n        await loadimages()\n        hideLoader()\n    }\n\n    const testVariants = testEl.querySelectorAll(`[${AB.SELECTOR_VARIANT}]`)\n    if (testVariants.length < 2) {\n        log?.('AB test, less then 2 variants')\n        remove(params.url)\n        showVariant()\n        return\n    } // log ERROR, show as is\n\n    // Further we have two+ variants\n    if (!testName) {\n        log?.('AB test, no test name')\n        remove(params.url)\n        showVariant()\n        return\n    }\n\n\n    const expirationDate = testEl.getAttribute(AB.SELECTOR_EXPIRATION)\n    if (!expirationDate) {\n        log?.('AB test, no expiration date')\n        remove(params.url)\n        showVariant()\n        return\n    }// log error, select first variant (control)\n    if (!validateExpirationDate(expirationDate)) {\n        log?.('AB test, wrong expiration date')\n        remove(params.url)\n        showVariant()\n        return\n    }\n\n    if (params.isRegisteredUser) {\n        showVariant()\n        return\n    }// select first variant (control)\n\n    // check LS\n    const variantFromLS = (test: LStest): string | void => {\n        const compareTestAndLS = (test: LStest, ls: LStest): boolean => {\n            if (test.name !== ls.name) return false\n            if (test.expiration !== ls.expiration) return false\n            if (test.url !== ls.url) return false\n            return true\n        }\n\n        const lsVariant = read(params.url)\n        if (!lsVariant) return\n        if (!compareTestAndLS(test, lsVariant)) {\n            log?.('AB test, wrong LS data')\n            return\n        }\n\n        return lsVariant.variant\n    }\n\n    const test: LStest = {\n        ts: `${Date.now()}`,\n        variant: 'A',\n        name: testName,\n        url: params.url,\n        expiration: expirationDate\n    }\n    const LStestVariant = variantFromLS(test)\n    if (LStestVariant) {\n        showVariant(LStestVariant)\n        return\n    }\n\n    // randomly assign a variant, show it\n    const numberOfVariants: number = testVariants.length\n    const randomVariant: number = Math.floor(Math.random() * numberOfVariants);\n    const randomName = Array.from(testVariants)[randomVariant].getAttribute(AB.SELECTOR_VARIANT)\n\n    if (!randomName) {\n        log?.('AB test, can not define random variant name')\n        showVariant()\n        return\n    }\n\n    write({\n        ...test,\n        variant: randomName,\n    })\n    showVariant(randomName)\n}\n","import \"./styles.css\";\nimport {CTA_SELECTOR, userId, isRegisteredUser} from \"./const\";\nimport {initAnalytics} from \"./analytics/analytics\";\nimport {initABTest} from \"./ab-test\"\n\n// Your code here\n\n// Parse HTML for test info\n// Parse cookies\n// Compare cookies and HTML\n// Apply final variant changes to HTML\n\n\n// TODO\n\n// Add analytics tracker\nconst url: string = window.location.href\n\nconst logger = initAnalytics(userId, url, CTA_SELECTOR)\ninitABTest({url, userId, isRegisteredUser}, logger)\n\n\n\n\n// Work with HTML service\n// Work with cookie service\n// Log errors servise","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\\/\\/.+)?\\/[^/]+(?:\\?.*)?$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var bundle = require('./bundle-url');\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    link.remove();\n  };\n  newLink.href = link.href.split('?')[0] + '?' + Date.now();\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      if (bundle.getBaseURL(links[i].href) === bundle.getBundleURL()) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nmodule.exports = reloadCSS;\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel] ✨ Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel] 🚨  ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">🚨</span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}