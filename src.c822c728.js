parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"D9Nj":[function(require,module,exports) {

},{}],"Q3x5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isRegisteredUser=exports.userId=exports.CTA_SELECTOR=void 0,exports.CTA_SELECTOR="data-cta",exports.userId="1",exports.isRegisteredUser=!1;
},{}],"GwJF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.trackEvent=exports.trackPageview=void 0;var e=function(e){var t=JSON.stringify(e);console.log("--\x3e Tracking Pageview: ".concat(t))};exports.trackPageview=e;var t=function(e){var t=JSON.stringify(e);console.log("--\x3e Tracking Event: ".concat(t))};exports.trackEvent=t;
},{}],"OTWw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.initAnalytics=void 0;var e=require("./analytics-api"),t=function(t,n,r){var i=function(){return(0,e.trackPageview)({ts:Date.now(),url:n,type:"load",userId:t})},o=function(){return(0,e.trackEvent)({ts:Date.now(),url:n,type:"click",userId:t})};window.addEventListener("load",i);var a=document.querySelector("[".concat(r,"]"));a&&a.addEventListener("click",o),window.addEventListener("beforeunload",function r(){window.removeEventListener("load",i),window.removeEventListener("click",o),window.removeEventListener("beforeunload",r),(0,e.trackPageview)({ts:Date.now(),url:n,type:"unload",userId:t})})};exports.initAnalytics=t;
},{"./analytics-api":"GwJF"}],"p12s":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LS_NAME=exports.AB_IMAGE_SELECTOR=exports.AB_SELECTOR_VARIANT=exports.AB_SELECTOR_EXPIRATION=exports.AB_SELECTOR=void 0,exports.AB_SELECTOR="data-test",exports.AB_SELECTOR_EXPIRATION="data-expiration",exports.AB_SELECTOR_VARIANT="data-variant",exports.AB_IMAGE_SELECTOR="data-src",exports.LS_NAME="APP_ABTEST";
},{}],"e1wq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.remove=exports.write=exports.read=void 0;var r=require("./const");function e(r){return("string"==typeof r.ts||"string"==typeof r.url)&&(("string"==typeof r.name||"string"==typeof r.variant)&&"string"==typeof r.name)}var t=function(t){var o,n="".concat(r.LS_NAME,"_").concat(t),a=localStorage.getItem(n);if(!a)return null;try{o=JSON.parse(a)}catch(c){return console.log("LS parsing error"),(0,exports.remove)(t),null}return e(o)?o:null};exports.read=t;var o=function(e){localStorage.setItem("".concat(r.LS_NAME,"_").concat(e.url),JSON.stringify(e))};exports.write=o;var n=function(e){var t="".concat(r.LS_NAME,"_").concat(e);localStorage.removeItem(t)};exports.remove=n;
},{"./const":"p12s"}],"H02N":[function(require,module,exports) {
"use strict";function t(t){return o(t)||n(t)||e(t)||r()}function r(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function e(t,r){if(t){if("string"==typeof t)return i(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?i(t,r):void 0}}function n(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function o(t){if(Array.isArray(t))return i(t)}function i(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}Object.defineProperty(exports,"__esModule",{value:!0}),exports.initABTest=void 0;var a=require("./const"),u=require("./local-storage"),l=function(t){var r=new Date(t);return"Invalid date"!==r.toString()&&!(r.getTime()<=Date.now())},c=function(r){return function(e){var n=0;e&&(n=r.findIndex(function(t){return t.getAttribute(a.AB_SELECTOR_VARIANT)===e})),n<0&&(n=0),[].concat(t(r.slice(0,n)),t(r.slice(n+1))).forEach(function(t){return t.remove()})}},f=function(){var t=document.querySelector(".loader");null==t||t.remove()},s=function(){var t=document.querySelectorAll("[".concat(a.AB_IMAGE_SELECTOR,"]"));0!==t.length&&t.forEach(function(t){var r=t.getAttribute(a.AB_IMAGE_SELECTOR);r&&t.setAttribute("src",r)})},A=function(t,r){var e=document.querySelector("[".concat(a.AB_SELECTOR,"]"));if(e){var n=e.querySelectorAll("[".concat(a.AB_SELECTOR_VARIANT,"]"));if(n.length<2)return null==r||r("AB test, less then 2 variants"),void(0,u.remove)(t.url);var o=function(t){c(Array.from(n))(t),s(),f()},i=e.getAttribute(a.AB_SELECTOR);if(!i)return null==r||r("AB test, no test name"),(0,u.remove)(t.url),void o();var A=e.getAttribute(a.AB_SELECTOR_EXPIRATION);if(!A)return null==r||r("AB test, no expiration date"),(0,u.remove)(t.url),void o();if(!l(A))return null==r||r("AB test, wrong expiration date"),(0,u.remove)(t.url),void o();if(t.isRegisteredUser)o();else{var v={ts:"".concat(Date.now()),variant:"A",name:i,url:t.url,expiration:A},d=function(e){var n=(0,u.read)(t.url);if(n){if(function(t,r){return t.name===r.name&&t.expiration===r.expiration&&t.url===r.url}(e,n))return n.variant;null==r||r("AB test, wrong LS data")}}(v);if(d)o(d);else{var m=n.length,E=Math.floor(Math.random()*m),g=Array.from(n)[E].getAttribute(a.AB_SELECTOR_VARIANT);if(!g)return null==r||r("AB test, can not define random variant name"),void o();(0,u.write)(Object.assign(Object.assign({},v),{variant:g})),o(g)}}}};exports.initABTest=A;
},{"./const":"p12s","./local-storage":"e1wq"}],"IaMM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.log=void 0;var e=function(e){console.log("--\x3e Logger: ".concat(JSON.stringify(e)))};exports.log=e;
},{}],"B6dB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),require("./styles.css");var e=require("./const"),r=require("./analytics/analytics"),s=require("./ab-test"),i=require("./api/logger"),t=window.location.href,u=function(e){return(0,i.log)({url:t,type:"error",payload:e})};(0,r.initAnalytics)(e.userId,t,e.CTA_SELECTOR),(0,s.initABTest)({url:t,userId:e.userId,isRegisteredUser:e.isRegisteredUser},u);
},{"./styles.css":"D9Nj","./const":"Q3x5","./analytics/analytics":"OTWw","./ab-test":"H02N","./api/logger":"IaMM"}]},{},["B6dB"], null)
//# sourceMappingURL=/abtest/src.c822c728.js.map